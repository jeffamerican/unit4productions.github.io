<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bubble Pop Zen - Peaceful Relaxation</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #667eea 100%);
            background-size: 400% 400%;
            animation: gradientShift 20s ease infinite;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: white;
            overflow: hidden;
        }

        .game-container {
            width: 400px;
            height: 600px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            overflow: hidden;
            position: relative;
            box-shadow: 0 15px 50px rgba(102, 126, 234, 0.3);
        }

        .game-header {
            padding: 20px;
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .zen-title {
            font-size: 24px;
            font-weight: 300;
            margin-bottom: 10px;
            color: rgba(255, 255, 255, 0.9);
            letter-spacing: 2px;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            font-size: 14px;
            opacity: 0.8;
        }

        .bubble-area {
            width: 100%;
            height: 500px;
            position: relative;
            background: rgba(255, 255, 255, 0.05);
            overflow: hidden;
        }

        .bubble {
            position: absolute;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            animation: float ease-in-out infinite;
            backdrop-filter: blur(5px);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .bubble:hover {
            transform: scale(1.1);
            filter: brightness(1.2);
        }

        .bubble.small {
            width: 40px;
            height: 40px;
            animation-duration: 8s;
        }

        .bubble.medium {
            width: 60px;
            height: 60px;
            animation-duration: 12s;
        }

        .bubble.large {
            width: 80px;
            height: 80px;
            animation-duration: 16s;
        }

        .bubble.xlarge {
            width: 100px;
            height: 100px;
            animation-duration: 20s;
        }

        .bubble.pastel-pink {
            background: radial-gradient(circle at 30% 30%, rgba(255, 182, 193, 0.8), rgba(255, 105, 180, 0.4));
            box-shadow: 0 5px 20px rgba(255, 182, 193, 0.4);
        }

        .bubble.pastel-blue {
            background: radial-gradient(circle at 30% 30%, rgba(173, 216, 230, 0.8), rgba(135, 206, 235, 0.4));
            box-shadow: 0 5px 20px rgba(173, 216, 230, 0.4);
        }

        .bubble.pastel-green {
            background: radial-gradient(circle at 30% 30%, rgba(152, 251, 152, 0.8), rgba(144, 238, 144, 0.4));
            box-shadow: 0 5px 20px rgba(152, 251, 152, 0.4);
        }

        .bubble.pastel-purple {
            background: radial-gradient(circle at 30% 30%, rgba(221, 160, 221, 0.8), rgba(186, 85, 211, 0.4));
            box-shadow: 0 5px 20px rgba(221, 160, 221, 0.4);
        }

        .bubble.pastel-orange {
            background: radial-gradient(circle at 30% 30%, rgba(255, 218, 185, 0.8), rgba(255, 165, 0, 0.4));
            box-shadow: 0 5px 20px rgba(255, 218, 185, 0.4);
        }

        .bubble.golden {
            background: radial-gradient(circle at 30% 30%, rgba(255, 215, 0, 0.9), rgba(255, 165, 0, 0.5));
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.6);
            animation: goldenGlow 2s ease-in-out infinite alternate;
        }

        .bubble.rainbow {
            background: conic-gradient(
                rgba(255, 0, 0, 0.6),
                rgba(255, 154, 0, 0.6),
                rgba(208, 222, 33, 0.6),
                rgba(79, 220, 74, 0.6),
                rgba(63, 218, 216, 0.6),
                rgba(47, 201, 226, 0.6),
                rgba(28, 127, 238, 0.6),
                rgba(95, 21, 242, 0.6),
                rgba(186, 12, 248, 0.6),
                rgba(251, 7, 217, 0.6),
                rgba(255, 0, 0, 0.6)
            );
            box-shadow: 0 10px 30px rgba(255, 255, 255, 0.4);
            animation: rainbowSpin 3s linear infinite, float 15s ease-in-out infinite;
        }

        .pop-animation {
            position: absolute;
            pointer-events: none;
            z-index: 1000;
        }

        .pop-particle {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            animation: popParticle 1s ease-out forwards;
        }

        .zen-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 18px;
            font-weight: 300;
            text-align: center;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            opacity: 0;
            animation: zenMessageFade 3s ease-in-out forwards;
            pointer-events: none;
            z-index: 500;
        }

        .floating-score {
            position: absolute;
            font-size: 16px;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            animation: floatScore 1.5s ease-out forwards;
            pointer-events: none;
            z-index: 1000;
        }

        .share-button {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 12px;
            backdrop-filter: blur(10px);
        }

        .zen-controls {
            position: absolute;
            bottom: 20px;
            left: 20px;
            right: 20px;
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .zen-button {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 14px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .zen-button:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .achievements {
            position: absolute;
            top: 100px;
            right: -300px;
            width: 280px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            transition: right 0.5s ease;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .achievements.visible {
            right: 20px;
        }

        .achievement-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
            padding: 8px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
            font-size: 14px;
        }

        .achievement-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }

        .mood-indicator {
            position: absolute;
            top: 80px;
            left: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 15px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            font-size: 14px;
        }

        .mood-emoji {
            font-size: 20px;
            animation: bounce 2s ease-in-out infinite;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) translateX(0px); }
            25% { transform: translateY(-10px) translateX(5px); }
            50% { transform: translateY(-5px) translateX(-5px); }
            75% { transform: translateY(-15px) translateX(3px); }
        }

        @keyframes goldenGlow {
            0% { box-shadow: 0 8px 25px rgba(255, 215, 0, 0.6); }
            100% { box-shadow: 0 12px 35px rgba(255, 215, 0, 0.9); }
        }

        @keyframes rainbowSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes popParticle {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0) translateX(var(--dx)) translateY(var(--dy));
            }
        }

        @keyframes zenMessageFade {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); }
            20% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1.2); }
        }

        @keyframes floatScore {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(1.5) translateY(-50px); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        @media (max-width: 480px) {
            .game-container {
                width: 95vw;
                height: 85vh;
            }
            
            .bubble-area {
                height: calc(85vh - 120px);
            }
            
            .achievements {
                width: 250px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <button class="share-button" onclick="shareProgress()">Share Zen</button>
        <div class="game-header">
            <div class="zen-title">Bubble Pop Zen</div>
            <div class="stats">
                <span>Bubbles: <span id="bubblesPopped">0</span></span>
                <span>Calm: <span id="calmLevel">0</span>%</span>
                <span>Time: <span id="playTime">0</span>s</span>
            </div>
        </div>
        <div class="bubble-area" id="bubbleArea"></div>
        <div class="mood-indicator">
            <div class="mood-emoji" id="moodEmoji">üòå</div>
            <span id="moodText">Finding your zen...</span>
        </div>
        <div class="zen-controls">
            <button class="zen-button" onclick="spawnBubbleWave()">More Bubbles</button>
            <button class="zen-button" onclick="toggleAchievements()">Achievements</button>
            <button class="zen-button" onclick="clearAll()">Clear All</button>
        </div>
        <div class="achievements" id="achievements">
            <h3 style="margin-bottom: 15px; color: rgba(255,255,255,0.9);">Zen Achievements</h3>
            <div id="achievementList"></div>
        </div>
    </div>

    <script>
        class BubblePopZen {
            constructor() {
                this.bubbleArea = document.getElementById('bubbleArea');
                this.bubbles = [];
                this.bubblesPopped = 0;
                this.calmLevel = 0;
                this.playTime = 0;
                this.startTime = Date.now();
                this.achievements = [];
                this.moodLevel = 0;
                
                // Zen messages for motivation
                this.zenMessages = [
                    "Breathe in peace...",
                    "Let stress float away...",
                    "Find your center...",
                    "Moment of tranquility...",
                    "Inner harmony achieved...",
                    "Peaceful mind, peaceful heart...",
                    "Serenity found...",
                    "Calm waters ahead...",
                    "Mindful moment...",
                    "Balance restored..."
                ];
                
                // Achievement definitions
                this.achievementDefs = [
                    { id: 'first_pop', name: 'First Pop', description: 'Pop your first bubble', threshold: 1, icon: 'ü´ß' },
                    { id: 'zen_master', name: 'Zen Master', description: 'Pop 100 bubbles', threshold: 100, icon: 'üßò' },
                    { id: 'bubble_whisperer', name: 'Bubble Whisperer', description: 'Pop 500 bubbles', threshold: 500, icon: '‚ú®' },
                    { id: 'five_minutes', name: 'Five Minutes of Peace', description: 'Play for 5 minutes', threshold: 300, icon: '‚è∞' },
                    { id: 'rainbow_hunter', name: 'Rainbow Hunter', description: 'Pop 10 rainbow bubbles', threshold: 10, icon: 'üåà' },
                    { id: 'golden_touch', name: 'Golden Touch', description: 'Pop 25 golden bubbles', threshold: 25, icon: '‚ú®' },
                    { id: 'perfectionist', name: 'Perfectionist', description: 'Reach 100% calm level', threshold: 100, icon: 'üíØ' }
                ];
                
                this.achievementProgress = this.loadAchievements();
                
                this.initializeGame();
                this.startGameLoop();
                this.updateMoodIndicator();
            }

            loadAchievements() {
                const saved = localStorage.getItem('bubbleZenAchievements');
                return saved ? JSON.parse(saved) : {
                    first_pop: 0,
                    zen_master: 0,
                    bubble_whisperer: 0,
                    five_minutes: 0,
                    rainbow_hunter: 0,
                    golden_touch: 0,
                    perfectionist: 0
                };
            }

            saveAchievements() {
                localStorage.setItem('bubbleZenAchievements', JSON.stringify(this.achievementProgress));
            }

            initializeGame() {
                // Create initial bubble spread
                for (let i = 0; i < 8; i++) {
                    setTimeout(() => this.createBubble(), i * 300);
                }
                
                // Render achievements
                this.renderAchievements();
            }

            createBubble() {
                const bubble = document.createElement('div');
                
                // Determine bubble properties
                const sizes = ['small', 'small', 'medium', 'medium', 'large', 'xlarge'];
                const colors = ['pastel-pink', 'pastel-blue', 'pastel-green', 'pastel-purple', 'pastel-orange'];
                
                let size = sizes[Math.floor(Math.random() * sizes.length)];
                let color = colors[Math.floor(Math.random() * colors.length)];
                let special = false;
                
                // Special bubble chance
                const specialRoll = Math.random();
                if (specialRoll < 0.02) { // 2% rainbow
                    color = 'rainbow';
                    special = 'rainbow';
                } else if (specialRoll < 0.05) { // 3% golden
                    color = 'golden';
                    special = 'golden';
                }
                
                bubble.className = `bubble ${size} ${color}`;
                
                // Position bubble randomly
                const maxX = this.bubbleArea.clientWidth - 100;
                const maxY = this.bubbleArea.clientHeight - 100;
                bubble.style.left = Math.random() * maxX + 'px';
                bubble.style.top = Math.random() * maxY + 'px';
                
                // Add random animation delay
                bubble.style.animationDelay = Math.random() * 2 + 's';
                
                // Bubble data
                const bubbleData = {
                    element: bubble,
                    size: size,
                    color: color,
                    special: special,
                    birthTime: Date.now()
                };
                
                // Click handler
                bubble.addEventListener('click', () => this.popBubble(bubbleData));
                
                this.bubbleArea.appendChild(bubble);
                this.bubbles.push(bubbleData);
                
                // Auto-pop after long time for zen flow
                setTimeout(() => {
                    if (this.bubbles.includes(bubbleData)) {
                        this.popBubble(bubbleData, false);
                    }
                }, 30000 + Math.random() * 20000); // 30-50 seconds
            }

            popBubble(bubbleData, clicked = true) {
                if (!this.bubbles.includes(bubbleData)) return;
                
                const bubble = bubbleData.element;
                const rect = bubble.getBoundingClientRect();
                const containerRect = this.bubbleArea.getBoundingClientRect();
                
                // Calculate score based on bubble properties
                let points = 1;
                if (bubbleData.size === 'large') points = 2;
                if (bubbleData.size === 'xlarge') points = 3;
                if (bubbleData.special === 'golden') points *= 3;
                if (bubbleData.special === 'rainbow') points *= 5;
                
                // Only count points and achievements for clicked bubbles
                if (clicked) {
                    this.bubblesPopped++;
                    this.calmLevel = Math.min(100, this.calmLevel + points);
                    
                    // Update achievement progress
                    this.achievementProgress.first_pop = Math.max(this.achievementProgress.first_pop, 1);
                    this.achievementProgress.zen_master = Math.max(this.achievementProgress.zen_master, this.bubblesPopped);
                    this.achievementProgress.bubble_whisperer = Math.max(this.achievementProgress.bubble_whisperer, this.bubblesPopped);
                    
                    if (bubbleData.special === 'rainbow') {
                        this.achievementProgress.rainbow_hunter++;
                    }
                    if (bubbleData.special === 'golden') {
                        this.achievementProgress.golden_touch++;
                    }
                    if (this.calmLevel >= 100) {
                        this.achievementProgress.perfectionist = Math.max(this.achievementProgress.perfectionist, 100);
                    }
                    
                    this.saveAchievements();
                    this.checkNewAchievements();
                    
                    // Show floating score
                    this.showFloatingScore(rect.left - containerRect.left + 50, rect.top - containerRect.top + 50, `+${points}`);
                }
                
                // Create pop animation
                this.createPopAnimation(
                    rect.left - containerRect.left + 50,
                    rect.top - containerRect.top + 50,
                    bubbleData.color
                );
                
                // Remove bubble
                this.removeBubble(bubbleData);
                
                // Show zen message occasionally
                if (clicked && Math.random() < 0.1) {
                    this.showZenMessage();
                }
                
                // Spawn new bubble to maintain flow
                if (this.bubbles.length < 12) {
                    setTimeout(() => this.createBubble(), 1000 + Math.random() * 3000);
                }
                
                this.updateMoodIndicator();
            }

            createPopAnimation(x, y, color) {
                const colors = {
                    'pastel-pink': '#FFB6C1',
                    'pastel-blue': '#ADD8E6',
                    'pastel-green': '#98FB98',
                    'pastel-purple': '#DDA0DD',
                    'pastel-orange': '#FFDAB9',
                    'golden': '#FFD700',
                    'rainbow': '#FF69B4'
                };
                
                const particleColor = colors[color] || '#FFFFFF';
                
                // Create 8 particles
                for (let i = 0; i < 8; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'pop-particle';
                    particle.style.left = x + 'px';
                    particle.style.top = y + 'px';
                    particle.style.background = particleColor;
                    
                    const angle = (Math.PI * 2 * i) / 8;
                    const distance = 30 + Math.random() * 20;
                    particle.style.setProperty('--dx', Math.cos(angle) * distance + 'px');
                    particle.style.setProperty('--dy', Math.sin(angle) * distance + 'px');
                    
                    this.bubbleArea.appendChild(particle);
                    
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                    }, 1000);
                }
            }

            showFloatingScore(x, y, text) {
                const score = document.createElement('div');
                score.className = 'floating-score';
                score.textContent = text;
                score.style.left = x + 'px';
                score.style.top = y + 'px';
                
                this.bubbleArea.appendChild(score);
                
                setTimeout(() => {
                    if (score.parentNode) {
                        score.parentNode.removeChild(score);
                    }
                }, 1500);
            }

            showZenMessage() {
                const message = document.createElement('div');
                message.className = 'zen-message';
                message.textContent = this.zenMessages[Math.floor(Math.random() * this.zenMessages.length)];
                
                this.bubbleArea.appendChild(message);
                
                setTimeout(() => {
                    if (message.parentNode) {
                        message.parentNode.removeChild(message);
                    }
                }, 3000);
            }

            removeBubble(bubbleData) {
                const index = this.bubbles.indexOf(bubbleData);
                if (index > -1) {
                    this.bubbles.splice(index, 1);
                }
                
                if (bubbleData.element && bubbleData.element.parentNode) {
                    bubbleData.element.parentNode.removeChild(bubbleData.element);
                }
            }

            updateMoodIndicator() {
                const moodEmoji = document.getElementById('moodEmoji');
                const moodText = document.getElementById('moodText');
                
                if (this.calmLevel < 20) {
                    moodEmoji.textContent = 'üòê';
                    moodText.textContent = 'Finding your zen...';
                } else if (this.calmLevel < 40) {
                    moodEmoji.textContent = 'üòå';
                    moodText.textContent = 'Feeling calmer...';
                } else if (this.calmLevel < 60) {
                    moodEmoji.textContent = 'üòä';
                    moodText.textContent = 'Peaceful vibes...';
                } else if (this.calmLevel < 80) {
                    moodEmoji.textContent = 'üòá';
                    moodText.textContent = 'Deep tranquility...';
                } else {
                    moodEmoji.textContent = 'üßò';
                    moodText.textContent = 'Perfect zen state!';
                }
            }

            checkNewAchievements() {
                this.achievementDefs.forEach(achievement => {
                    const progress = this.achievementProgress[achievement.id] || 0;
                    
                    if (progress >= achievement.threshold && !this.achievements.includes(achievement.id)) {
                        this.achievements.push(achievement.id);
                        this.showAchievementNotification(achievement);
                    }
                });
                
                this.renderAchievements();
            }

            showAchievementNotification(achievement) {
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 50px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: rgba(255, 215, 0, 0.9);
                    color: #000;
                    padding: 15px 25px;
                    border-radius: 25px;
                    font-weight: bold;
                    z-index: 10000;
                    animation: achievementPop 3s ease-out forwards;
                    box-shadow: 0 10px 30px rgba(255, 215, 0, 0.5);
                `;
                notification.innerHTML = `${achievement.icon} Achievement Unlocked: ${achievement.name}`;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 3000);
            }

            renderAchievements() {
                const list = document.getElementById('achievementList');
                list.innerHTML = '';
                
                this.achievementDefs.forEach(achievement => {
                    const progress = this.achievementProgress[achievement.id] || 0;
                    const completed = progress >= achievement.threshold;
                    
                    const item = document.createElement('div');
                    item.className = 'achievement-item';
                    item.style.opacity = completed ? '1' : '0.5';
                    
                    item.innerHTML = `
                        <div class="achievement-icon" style="background: ${completed ? '#FFD700' : 'rgba(255,255,255,0.3)'}">
                            ${achievement.icon}
                        </div>
                        <div>
                            <div style="font-weight: bold; ${completed ? 'color: #FFD700' : ''}">${achievement.name}</div>
                            <div style="font-size: 12px; opacity: 0.8">${achievement.description}</div>
                            <div style="font-size: 11px; opacity: 0.6">${progress}/${achievement.threshold}</div>
                        </div>
                    `;
                    
                    list.appendChild(item);
                });
            }

            startGameLoop() {
                setInterval(() => {
                    this.playTime = Math.floor((Date.now() - this.startTime) / 1000);
                    
                    // Update time-based achievements
                    this.achievementProgress.five_minutes = Math.max(this.achievementProgress.five_minutes, this.playTime);
                    
                    // Gradually decrease calm level for dynamic gameplay
                    this.calmLevel = Math.max(0, this.calmLevel - 0.1);
                    
                    this.updateDisplay();
                }, 1000);
                
                // Spawn bubbles periodically
                setInterval(() => {
                    if (this.bubbles.length < 10) {
                        this.createBubble();
                    }
                }, 3000);
            }

            updateDisplay() {
                document.getElementById('bubblesPopped').textContent = this.bubblesPopped;
                document.getElementById('calmLevel').textContent = Math.floor(this.calmLevel);
                document.getElementById('playTime').textContent = this.playTime;
            }
        }

        let game;

        function startGame() {
            game = new BubblePopZen();
        }

        function spawnBubbleWave() {
            if (!game) return;
            
            for (let i = 0; i < 5; i++) {
                setTimeout(() => game.createBubble(), i * 100);
            }
        }

        function clearAll() {
            if (!game) return;
            
            // Pop all bubbles with animation
            [...game.bubbles].forEach((bubbleData, index) => {
                setTimeout(() => {
                    if (game.bubbles.includes(bubbleData)) {
                        game.popBubble(bubbleData, false);
                    }
                }, index * 100);
            });
        }

        function toggleAchievements() {
            const achievements = document.getElementById('achievements');
            achievements.classList.toggle('visible');
        }

        function shareProgress() {
            const bubbles = game ? game.bubblesPopped : 0;
            const calm = game ? Math.floor(game.calmLevel) : 0;
            const time = game ? game.playTime : 0;
            
            const text = `I've found my zen by popping ${bubbles} bubbles and reached ${calm}% calm level in ${time} seconds of peaceful gameplay. Join me in Bubble Pop Zen for some mindful relaxation!`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Bubble Pop Zen - My Peaceful Progress',
                    text: text,
                    url: window.location.href
                });
            } else {
                const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(window.location.href)}`;
                window.open(url, '_blank');
            }
        }

        // Add the missing achievement animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes achievementPop {
                0% { opacity: 0; transform: translateX(-50%) scale(0.5) translateY(-20px); }
                20% { opacity: 1; transform: translateX(-50%) scale(1.1) translateY(0px); }
                25% { transform: translateX(-50%) scale(1) translateY(0px); }
                90% { opacity: 1; transform: translateX(-50%) scale(1) translateY(0px); }
                100% { opacity: 0; transform: translateX(-50%) scale(0.8) translateY(-20px); }
            }
        `;
        document.head.appendChild(style);

        // Start the game
        startGame();
    </script>
</body>
</html>