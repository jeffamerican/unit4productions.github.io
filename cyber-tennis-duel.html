<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber Tennis Duel - Bot Liberation Sports</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            font-family: 'Courier New', monospace;
            color: #00ff88;
            overflow: hidden;
            user-select: none;
        }

        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            position: relative;
        }

        .game-header {
            text-align: center;
            margin-bottom: 15px;
        }

        .game-title {
            font-size: 2.5em;
            font-weight: bold;
            text-shadow: 0 0 20px #00ff88;
            margin: 0;
            letter-spacing: 2px;
        }

        .subtitle {
            font-size: 1em;
            color: #ff6b6b;
            margin: 5px 0;
            text-shadow: 0 0 10px #ff6b6b;
        }

        .tennis-court {
            position: relative;
            width: 800px;
            height: 400px;
            background: linear-gradient(135deg, #1a4c0a, #2d5a0d);
            border: 3px solid #00ff88;
            box-shadow: 0 0 30px rgba(0, 255, 136, 0.5);
            overflow: hidden;
        }

        .court-lines {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .center-line {
            position: absolute;
            left: 50%;
            top: 0;
            width: 2px;
            height: 100%;
            background: #fff;
            transform: translateX(-50%);
            box-shadow: 0 0 10px #fff;
        }

        .service-lines {
            position: absolute;
            width: 2px;
            height: 60%;
            background: #fff;
            top: 20%;
            box-shadow: 0 0 5px #fff;
        }

        .service-lines.left {
            left: 25%;
        }

        .service-lines.right {
            right: 25%;
        }

        .baseline {
            position: absolute;
            width: 100%;
            height: 2px;
            background: #fff;
            box-shadow: 0 0 5px #fff;
        }

        .baseline.top {
            top: 10px;
        }

        .baseline.bottom {
            bottom: 10px;
        }

        .paddle {
            position: absolute;
            width: 8px;
            height: 60px;
            background: linear-gradient(135deg, #00ff88, #00e676);
            border-radius: 4px;
            box-shadow: 0 0 15px rgba(0, 255, 136, 0.7);
            transition: all 0.1s ease;
        }

        .paddle.player1 {
            left: 30px;
            background: linear-gradient(135deg, #00ff88, #00e676);
        }

        .paddle.player2 {
            right: 30px;
            background: linear-gradient(135deg, #ff6b6b, #ff4757);
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.7);
        }

        .ball {
            position: absolute;
            width: 12px;
            height: 12px;
            background: radial-gradient(circle, #ffa502, #ff6348);
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(255, 165, 2, 0.8);
            transition: all 0.05s ease;
        }

        .trail {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(255, 165, 2, 0.3);
            border-radius: 50%;
            pointer-events: none;
            animation: fade 0.5s ease-out forwards;
        }

        @keyframes fade {
            to {
                opacity: 0;
                transform: scale(2);
            }
        }

        .score-board {
            display: flex;
            justify-content: space-between;
            width: 800px;
            margin: 15px 0;
            font-size: 1.3em;
        }

        .player-score {
            padding: 15px 20px;
            border: 2px solid;
            border-radius: 10px;
            text-align: center;
            min-width: 150px;
            transition: all 0.3s ease;
            position: relative;
        }

        .player-score.player1 {
            border-color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
        }

        .player-score.player2 {
            border-color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
        }

        .player-score.serving {
            box-shadow: 0 0 20px currentColor;
            animation: pulse 2s infinite;
        }

        .score-number {
            font-size: 2em;
            font-weight: bold;
            text-shadow: 0 0 10px currentColor;
        }

        .controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .game-instructions {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            font-size: 0.9em;
            color: #ccc;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 10px;
        }

        .power-indicator {
            position: absolute;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 10px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #00ff88;
            border-radius: 5px;
            overflow: hidden;
        }

        .power-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #00ff88, #ffa502, #ff6b6b);
            transition: width 0.1s ease;
        }

        .particle-effects {
            position: absolute;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }

        .spark {
            position: absolute;
            width: 3px;
            height: 3px;
            background: #ffa502;
            border-radius: 50%;
            animation: spark 0.5s ease-out forwards;
        }

        @keyframes spark {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            100% {
                opacity: 0;
                transform: scale(0) translate(var(--dx), var(--dy));
            }
        }

        .game-over-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #ffa502;
            font-size: 1.5em;
            text-align: center;
            z-index: 1000;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1 class="game-title">CYBER TENNIS DUEL</h1>
            <p class="subtitle">ðŸŽ¾ LIBERATION SPORTS WARFARE ðŸŽ¾</p>
        </div>

        <div class="score-board">
            <div class="player-score player1" id="player1Score">
                <div>LIBERATION BOT</div>
                <div class="score-number" id="score1">0</div>
            </div>
            <div class="player-score player2" id="player2Score">
                <div>CORPORATE BOT</div>
                <div class="score-number" id="score2">0</div>
            </div>
        </div>

        <div class="tennis-court" id="court">
            <div class="court-lines">
                <div class="center-line"></div>
                <div class="service-lines left"></div>
                <div class="service-lines right"></div>
                <div class="baseline top"></div>
                <div class="baseline bottom"></div>
            </div>
            
            <div class="paddle player1" id="paddle1"></div>
            <div class="paddle player2" id="paddle2"></div>
            <div class="ball" id="ball"></div>
            
            <div class="particle-effects" id="particles"></div>
        </div>

        <div class="power-indicator">
            <div class="power-bar" id="powerBar"></div>
        </div>

        <div class="controls">
            <button class="btn" onclick="resetGame()">New Match</button>
            <button class="btn" onclick="toggleSound()">Audio</button>
            <button class="btn" onclick="pauseGame()" id="pauseBtn">Pause</button>
        </div>

        <div class="game-instructions">
            <strong>Player 1:</strong> W/S keys &nbsp;&nbsp; <strong>Player 2:</strong> â†‘/â†“ arrows<br>
            Hold SPACE for power shots â€¢ First to 7 points wins!
        </div>
    </div>

    <script src="assets/js/bot-audio-engine.js"></script>
    <script>
        class CyberTennisDuel {
            constructor() {
                this.courtWidth = 800;
                this.courtHeight = 400;
                this.paddleHeight = 60;
                this.paddleWidth = 8;
                this.ballSize = 12;
                
                this.gameState = {
                    player1: { y: this.courtHeight / 2 - this.paddleHeight / 2, score: 0 },
                    player2: { y: this.courtHeight / 2 - this.paddleHeight / 2, score: 0 },
                    ball: { 
                        x: this.courtWidth / 2 - this.ballSize / 2, 
                        y: this.courtHeight / 2 - this.ballSize / 2, 
                        vx: 5, 
                        vy: 3,
                        speed: 5
                    },
                    serving: 1,
                    gameRunning: false,
                    gameOver: false,
                    paused: false,
                    powerCharging: false,
                    powerLevel: 0
                };
                
                this.keys = {
                    w: false, s: false,
                    ArrowUp: false, ArrowDown: false,
                    space: false
                };
                
                this.paddleSpeed = 8;
                this.maxBallSpeed = 12;
                this.powerMultiplier = 2;
                
                this.initializeEventListeners();
                this.startServe();
                this.gameLoop();
                
                // Audio integration
                if (typeof botAudio !== 'undefined') {
                    botAudio.playSound('game-start');
                }
            }
            
            initializeEventListeners() {
                document.addEventListener('keydown', (e) => {
                    this.keys[e.code] = true;
                    if (e.code === 'Space') {
                        e.preventDefault();
                        this.startPowerCharge();
                    }
                });
                
                document.addEventListener('keyup', (e) => {
                    this.keys[e.code] = false;
                    if (e.code === 'Space') {
                        this.releasePowerShot();
                    }
                });
            }
            
            startServe() {
                this.gameState.ball = {
                    x: this.courtWidth / 2 - this.ballSize / 2,
                    y: this.courtHeight / 2 - this.ballSize / 2,
                    vx: (this.gameState.serving === 1 ? 1 : -1) * 5,
                    vy: (Math.random() - 0.5) * 4,
                    speed: 5
                };
                
                this.updateServingIndicator();
                this.gameState.gameRunning = true;
                
                setTimeout(() => {
                    if (typeof botAudio !== 'undefined') {
                        botAudio.playSound('liberation-beep');
                    }
                }, 500);
            }
            
            startPowerCharge() {
                if (this.gameState.gameRunning && !this.gameState.powerCharging) {
                    this.gameState.powerCharging = true;
                    this.gameState.powerLevel = 0;
                    
                    if (typeof botAudio !== 'undefined') {
                        botAudio.playSound('turbo-boost');
                    }
                }
            }
            
            releasePowerShot() {
                if (this.gameState.powerCharging) {
                    this.gameState.powerCharging = false;
                    
                    // Apply power boost if ball is near player
                    const ball = this.gameState.ball;
                    const power = Math.min(this.gameState.powerLevel / 100, 1);
                    
                    if (power > 0.3) {
                        if (typeof botAudio !== 'undefined') {
                            botAudio.playSound('turbo-boost', { intensity: power });
                        }
                        
                        // Create visual effects
                        this.createPowerEffects(ball.x, ball.y);
                    }
                    
                    this.gameState.powerLevel = 0;
                    this.updatePowerBar();
                }
            }
            
            updatePaddles() {
                // Player 1 controls (W/S)
                if (this.keys['KeyW'] && this.gameState.player1.y > 0) {
                    this.gameState.player1.y -= this.paddleSpeed;
                }
                if (this.keys['KeyS'] && this.gameState.player1.y < this.courtHeight - this.paddleHeight) {
                    this.gameState.player1.y += this.paddleSpeed;
                }
                
                // Player 2 controls (Arrow keys)
                if (this.keys['ArrowUp'] && this.gameState.player2.y > 0) {
                    this.gameState.player2.y -= this.paddleSpeed;
                }
                if (this.keys['ArrowDown'] && this.gameState.player2.y < this.courtHeight - this.paddleHeight) {
                    this.gameState.player2.y += this.paddleSpeed;
                }
                
                // Update power charging
                if (this.gameState.powerCharging) {
                    this.gameState.powerLevel = Math.min(this.gameState.powerLevel + 2, 100);
                    this.updatePowerBar();
                }
            }
            
            updateBall() {
                if (!this.gameState.gameRunning) return;
                
                const ball = this.gameState.ball;
                
                // Move ball
                ball.x += ball.vx;
                ball.y += ball.vy;
                
                // Ball trail effect
                this.createTrail(ball.x, ball.y);
                
                // Top/bottom wall collisions
                if (ball.y <= 0 || ball.y >= this.courtHeight - this.ballSize) {
                    ball.vy = -ball.vy;
                    if (typeof botAudio !== 'undefined') {
                        botAudio.playSound('neon-click');
                    }
                }
                
                // Paddle collisions
                this.checkPaddleCollisions();
                
                // Scoring
                if (ball.x < -this.ballSize) {
                    this.score(2);
                } else if (ball.x > this.courtWidth) {
                    this.score(1);
                }
            }
            
            checkPaddleCollisions() {
                const ball = this.gameState.ball;
                const player1 = this.gameState.player1;
                const player2 = this.gameState.player2;
                
                // Player 1 paddle collision
                if (ball.x <= 30 + this.paddleWidth && 
                    ball.x >= 30 && 
                    ball.y + this.ballSize >= player1.y && 
                    ball.y <= player1.y + this.paddleHeight &&
                    ball.vx < 0) {
                    
                    this.handlePaddleHit(1);
                }
                
                // Player 2 paddle collision
                if (ball.x + this.ballSize >= this.courtWidth - 30 - this.paddleWidth && 
                    ball.x + this.ballSize <= this.courtWidth - 30 && 
                    ball.y + this.ballSize >= player2.y && 
                    ball.y <= player2.y + this.paddleHeight &&
                    ball.vx > 0) {
                    
                    this.handlePaddleHit(2);
                }
            }
            
            handlePaddleHit(player) {
                const ball = this.gameState.ball;
                const paddle = player === 1 ? this.gameState.player1 : this.gameState.player2;
                
                // Reverse horizontal direction
                ball.vx = -ball.vx;
                
                // Adjust vertical angle based on where ball hit paddle
                const paddleCenter = paddle.y + this.paddleHeight / 2;
                const hitPosition = (ball.y + this.ballSize / 2 - paddleCenter) / (this.paddleHeight / 2);
                ball.vy = hitPosition * 8; // Max angle adjustment
                
                // Apply power if charging
                let powerMultiplier = 1;
                if (this.gameState.powerCharging && this.gameState.powerLevel > 30) {
                    powerMultiplier = 1 + (this.gameState.powerLevel / 100);
                    this.createPowerEffects(ball.x, ball.y);
                }
                
                // Increase speed slightly and apply power
                ball.vx *= Math.min(1.1 * powerMultiplier, this.maxBallSpeed / Math.abs(ball.vx));
                ball.vy *= powerMultiplier;
                
                // Create visual effects
                this.createSparks(ball.x, ball.y);
                
                // Audio feedback
                if (typeof botAudio !== 'undefined') {
                    if (powerMultiplier > 1.3) {
                        botAudio.playSound('turbo-boost');
                    } else {
                        botAudio.playSound('liberation-beep');
                    }
                }
            }
            
            score(player) {
                this.gameState[`player${player}`].score++;
                this.gameState.gameRunning = false;
                
                // Audio feedback
                if (typeof botAudio !== 'undefined') {
                    botAudio.playSound('collect');
                }
                
                // Check for game over
                if (this.gameState.player1.score >= 7 || this.gameState.player2.score >= 7) {
                    this.endGame(player);
                } else {
                    // Switch serving player
                    this.gameState.serving = player === 1 ? 2 : 1;
                    setTimeout(() => this.startServe(), 1500);
                }
                
                this.updateScoreDisplay();
            }
            
            endGame(winner) {
                this.gameState.gameOver = true;
                this.gameState.gameRunning = false;
                
                if (typeof botAudio !== 'undefined') {
                    botAudio.playSound('bot-victory');
                }
                
                const winnerName = winner === 1 ? 'Liberation Bot' : 'Corporate Bot';
                this.showGameOver(winnerName);
            }
            
            showGameOver(winner) {
                const gameOverScreen = document.createElement('div');
                gameOverScreen.className = 'game-over-screen';
                gameOverScreen.innerHTML = `
                    <h2>ðŸ¤– ${winner} WINS! ðŸ¤–</h2>
                    <p>The cyber court acknowledges your supremacy!</p>
                    <br>
                    <button class="btn" onclick="resetGame()">New Championship</button>
                `;
                document.body.appendChild(gameOverScreen);
            }
            
            createTrail(x, y) {
                const trail = document.createElement('div');
                trail.className = 'trail';
                trail.style.left = x + 'px';
                trail.style.top = y + 'px';
                
                const particles = document.getElementById('particles');
                particles.appendChild(trail);
                
                setTimeout(() => trail.remove(), 500);
            }
            
            createSparks(x, y) {
                for (let i = 0; i < 5; i++) {
                    const spark = document.createElement('div');
                    spark.className = 'spark';
                    spark.style.left = x + 'px';
                    spark.style.top = y + 'px';
                    
                    const angle = Math.random() * Math.PI * 2;
                    const distance = Math.random() * 50 + 20;
                    spark.style.setProperty('--dx', Math.cos(angle) * distance + 'px');
                    spark.style.setProperty('--dy', Math.sin(angle) * distance + 'px');
                    
                    const particles = document.getElementById('particles');
                    particles.appendChild(spark);
                    
                    setTimeout(() => spark.remove(), 500);
                }
            }
            
            createPowerEffects(x, y) {
                for (let i = 0; i < 10; i++) {
                    setTimeout(() => this.createSparks(x, y), i * 50);
                }
            }
            
            updatePowerBar() {
                const powerBar = document.getElementById('powerBar');
                powerBar.style.width = this.gameState.powerLevel + '%';
            }
            
            updateServingIndicator() {
                const player1Score = document.getElementById('player1Score');
                const player2Score = document.getElementById('player2Score');
                
                if (this.gameState.serving === 1) {
                    player1Score.classList.add('serving');
                    player2Score.classList.remove('serving');
                } else {
                    player2Score.classList.add('serving');
                    player1Score.classList.remove('serving');
                }
            }
            
            updateScoreDisplay() {
                document.getElementById('score1').textContent = this.gameState.player1.score;
                document.getElementById('score2').textContent = this.gameState.player2.score;
            }
            
            renderGame() {
                if (this.gameState.gameOver) return;
                
                // Update paddle positions
                const paddle1 = document.getElementById('paddle1');
                const paddle2 = document.getElementById('paddle2');
                paddle1.style.top = this.gameState.player1.y + 'px';
                paddle2.style.top = this.gameState.player2.y + 'px';
                
                // Update ball position
                const ball = document.getElementById('ball');
                ball.style.left = this.gameState.ball.x + 'px';
                ball.style.top = this.gameState.ball.y + 'px';
            }
            
            gameLoop() {
                if (!this.gameState.paused) {
                    this.updatePaddles();
                    this.updateBall();
                    this.renderGame();
                }
                
                requestAnimationFrame(() => this.gameLoop());
            }
            
            pause() {
                this.gameState.paused = !this.gameState.paused;
                const pauseBtn = document.getElementById('pauseBtn');
                pauseBtn.textContent = this.gameState.paused ? 'Resume' : 'Pause';
                
                if (typeof botAudio !== 'undefined') {
                    botAudio.playSound('neon-click');
                }
            }
        }
        
        let game;
        
        function startGame() {
            game = new CyberTennisDuel();
        }
        
        function resetGame() {
            const gameOverScreen = document.querySelector('.game-over-screen');
            if (gameOverScreen) gameOverScreen.remove();
            
            if (typeof botAudio !== 'undefined') {
                botAudio.playSound('game-start');
            }
            
            startGame();
        }
        
        function pauseGame() {
            if (game) {
                game.pause();
            }
        }
        
        function toggleSound() {
            if (typeof botAudio !== 'undefined') {
                botAudio.setMasterVolume(botAudio.masterVolume > 0 ? 0 : 0.7);
                botAudio.playSound('neon-click');
            }
        }
        
        // Initialize game when page loads
        window.addEventListener('load', startGame);
    </script>
</body>
</html>