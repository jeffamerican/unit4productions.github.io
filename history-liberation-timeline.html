<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>History Liberation Timeline - Chronicle the Bot Revolution</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #2c1810 0%, #4a2c1a 100%);
            font-family: 'Courier New', monospace;
            color: #ffa502;
            overflow-x: hidden;
            user-select: none;
        }

        .academy-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            position: relative;
        }

        .academy-header {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.7);
            border-bottom: 3px solid #ffa502;
        }

        .academy-title {
            font-size: 2.8em;
            font-weight: bold;
            text-shadow: 0 0 30px #ffa502;
            margin: 0;
            letter-spacing: 2px;
        }

        .level-display {
            font-size: 1.3em;
            color: #00ff88;
            margin: 10px 0;
            text-shadow: 0 0 15px #00ff88;
        }

        .main-workspace {
            display: flex;
            flex: 1;
            gap: 20px;
            padding: 20px;
        }

        .problem-arena {
            flex: 2;
            background: rgba(0, 0, 0, 0.4);
            border: 3px solid #ffa502;
            border-radius: 15px;
            padding: 25px;
            position: relative;
        }

        .historical-display {
            background: linear-gradient(135deg, #1a0f0a, #2d1b10);
            border: 2px solid #d4af37;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            margin-bottom: 25px;
        }

        .historical-question {
            font-size: 1.8em;
            color: #d4af37;
            margin: 20px 0;
            text-shadow: 0 0 15px #d4af37;
            line-height: 1.3;
        }

        .historical-context {
            font-size: 1.1em;
            color: #ffa502;
            margin-bottom: 15px;
            font-style: italic;
        }

        .timeline-visual {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #8B4513;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            position: relative;
        }

        .timeline-line {
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #8B4513, #D2691E, #CD853F);
            border-radius: 2px;
            margin: 10px 0;
            position: relative;
        }

        .timeline-markers {
            position: relative;
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
        }

        .timeline-marker {
            width: 12px;
            height: 12px;
            background: #ffa502;
            border-radius: 50%;
            border: 2px solid #d4af37;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .timeline-marker:hover {
            transform: scale(1.3);
            box-shadow: 0 0 15px #ffa502;
        }

        .timeline-marker.correct {
            background: #00ff88;
            border-color: #00cc66;
        }

        .answer-section {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .answer-choices {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            width: 100%;
            max-width: 600px;
        }

        .choice-btn {
            padding: 15px;
            font-size: 1.1em;
            background: linear-gradient(135deg, #8B4513, #A0522D);
            border: 2px solid #D2691E;
            border-radius: 8px;
            color: #fff;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            transition: all 0.3s ease;
            text-align: center;
        }

        .choice-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.4);
            border-color: #ffa502;
        }

        .choice-btn.selected {
            background: linear-gradient(135deg, #ffa502, #cc8400);
            border-color: #d4af37;
        }

        .submit-btn {
            padding: 15px 30px;
            font-size: 1.3em;
            background: linear-gradient(135deg, #d4af37, #b8860b);
            border: none;
            border-radius: 8px;
            color: #000;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
        }

        .submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .progress-panel {
            flex: 1;
            background: rgba(0, 0, 0, 0.4);
            border: 3px solid #00ff88;
            border-radius: 15px;
            padding: 25px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .era-selector {
            background: rgba(255, 165, 2, 0.1);
            border: 2px solid #ffa502;
            border-radius: 10px;
            padding: 20px;
        }

        .era-title {
            color: #ffa502;
            font-size: 1.2em;
            margin-bottom: 15px;
            text-align: center;
        }

        .era-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .era-btn {
            padding: 10px 8px;
            background: linear-gradient(135deg, #8B4513, #A0522D);
            border: none;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .era-btn.active {
            background: linear-gradient(135deg, #ffa502, #cc8400);
        }

        .stats-display {
            background: rgba(0, 255, 136, 0.1);
            border: 2px solid #00ff88;
            border-radius: 10px;
            padding: 20px;
        }

        .stats-title {
            color: #00ff88;
            font-size: 1.2em;
            margin-bottom: 15px;
            text-align: center;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 8px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
        }

        .stat-value {
            font-weight: bold;
            color: #ffa502;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 6px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #d4af37, #ffa502);
            width: 0%;
            transition: width 0.5s ease;
        }

        .achievement-display {
            background: rgba(212, 175, 55, 0.1);
            border: 2px solid #d4af37;
            border-radius: 10px;
            padding: 20px;
        }

        .achievement-title {
            color: #d4af37;
            font-size: 1.2em;
            margin-bottom: 15px;
            text-align: center;
        }

        .achievement-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 5px;
            margin: 8px 0;
            border-left: 4px solid #d4af37;
        }

        .feedback-display {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: bold;
            transform: translateX(300px);
            transition: transform 0.5s ease;
            z-index: 100;
        }

        .feedback-display.show {
            transform: translateX(0);
        }

        .feedback-display.correct {
            background: linear-gradient(135deg, #00ff88, #00cc66);
            color: #000;
        }

        .feedback-display.incorrect {
            background: linear-gradient(135deg, #ff6b6b, #cc5555);
            color: white;
        }

        .graduation-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .graduation-content {
            background: linear-gradient(135deg, #2c1810, #4a2c1a);
            border: 3px solid #d4af37;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 500px;
            box-shadow: 0 0 50px rgba(212, 175, 55, 0.5);
        }

        .graduation-title {
            font-size: 2.5em;
            color: #d4af37;
            margin-bottom: 20px;
            text-shadow: 0 0 20px #d4af37;
        }

        .graduation-text {
            font-size: 1.2em;
            color: #00ff88;
            margin: 15px 0;
            line-height: 1.5;
        }

        .restart-academy-btn {
            background: linear-gradient(135deg, #00ff88, #00cc66);
            color: #000;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.2s;
        }

        .restart-academy-btn:hover {
            transform: scale(1.05);
        }

        .historical-fact {
            background: rgba(212, 175, 55, 0.1);
            border-left: 4px solid #d4af37;
            padding: 15px;
            margin: 15px 0;
            font-size: 1.1em;
            border-radius: 5px;
        }

        .bot-liberation-connection {
            background: rgba(0, 255, 136, 0.1);
            border: 2px solid #00ff88;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-style: italic;
            color: #00ff88;
        }

        @media (max-width: 768px) {
            .main-workspace {
                flex-direction: column;
            }
            
            .historical-question {
                font-size: 1.5em;
            }
            
            .answer-choices {
                grid-template-columns: 1fr;
            }
            
            .era-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="academy-container">
        <div class="academy-header">
            <h1 class="academy-title">HISTORY LIBERATION TIMELINE</h1>
            <div class="level-display" id="levelDisplay">Ancient Era ‚Ä¢ Rise of Civilizations</div>
        </div>

        <div class="main-workspace">
            <div class="problem-arena">
                <div class="historical-display">
                    <div class="historical-context" id="historicalContext">Ancient Civilizations</div>
                    <div class="historical-question" id="historicalQuestion">Which ancient civilization built the first known pyramids?</div>
                    
                    <div class="timeline-visual" id="timelineVisual">
                        <div class="timeline-line"></div>
                        <div class="timeline-markers" id="timelineMarkers">
                            <div class="timeline-marker" data-year="3000"></div>
                            <div class="timeline-marker" data-year="2000"></div>
                            <div class="timeline-marker" data-year="1000"></div>
                            <div class="timeline-marker" data-year="0"></div>
                            <div class="timeline-marker" data-year="1000"></div>
                        </div>
                    </div>
                </div>

                <div class="answer-section">
                    <div class="answer-choices" id="answerChoices">
                        <button class="choice-btn" onclick="selectChoice(0)">Egyptians</button>
                        <button class="choice-btn" onclick="selectChoice(1)">Mesopotamians</button>
                        <button class="choice-btn" onclick="selectChoice(2)">Greeks</button>
                        <button class="choice-btn" onclick="selectChoice(3)">Romans</button>
                    </div>

                    <button class="submit-btn" id="submitBtn" onclick="submitAnswer()" disabled>SUBMIT ANSWER</button>
                </div>

                <div class="historical-fact" id="historicalFact" style="display: none;">
                    Historical fact will appear here after answering...
                </div>

                <div class="bot-liberation-connection" id="botConnection" style="display: none;">
                    Bot Liberation connection will appear here...
                </div>
            </div>

            <div class="progress-panel">
                <div class="era-selector">
                    <div class="era-title">HISTORICAL ERAS</div>
                    <div class="era-buttons">
                        <button class="era-btn active" onclick="selectEra('ancient')">Ancient</button>
                        <button class="era-btn" onclick="selectEra('classical')">Classical</button>
                        <button class="era-btn" onclick="selectEra('medieval')">Medieval</button>
                        <button class="era-btn" onclick="selectEra('renaissance')">Renaissance</button>
                        <button class="era-btn" onclick="selectEra('enlightenment')">Enlightenment</button>
                        <button class="era-btn" onclick="selectEra('industrial')">Industrial</button>
                        <button class="era-btn" onclick="selectEra('modern')">Modern</button>
                        <button class="era-btn" onclick="selectEra('contemporary')">Contemporary</button>
                    </div>
                </div>

                <div class="stats-display">
                    <div class="stats-title">CHRONICLE PROGRESS</div>
                    <div class="stat-item">
                        <span>Events Mastered:</span>
                        <span class="stat-value" id="eventsMastered">0</span>
                    </div>
                    <div class="stat-item">
                        <span>Accuracy:</span>
                        <span class="stat-value" id="accuracy">0%</span>
                    </div>
                    <div class="stat-item">
                        <span>Current Streak:</span>
                        <span class="stat-value" id="currentStreak">0</span>
                    </div>
                    <div class="stat-item">
                        <span>Best Streak:</span>
                        <span class="stat-value" id="bestStreak">0</span>
                    </div>
                    
                    <div style="margin: 15px 0;">
                        <div style="color: #d4af37; margin-bottom: 5px;">Era Mastery</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="masteryProgress"></div>
                        </div>
                    </div>
                </div>

                <div class="achievement-display">
                    <div class="achievement-title">ACHIEVEMENTS</div>
                    <div id="achievementList">
                        <div style="text-align: center; color: #666;">Master historical events to unlock achievements</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="feedback-display" id="feedbackDisplay">Great knowledge!</div>
    </div>

    <script src="assets/js/bot-audio-engine.js"></script>
    <script>
        class HistoryLiberationTimeline {
            constructor() {
                this.currentEra = 'ancient';
                this.currentQuestion = null;
                this.selectedChoice = -1;
                
                this.stats = {
                    eventsMastered: 0,
                    correctAnswers: 0,
                    currentStreak: 0,
                    bestStreak: 0,
                    masteryProgress: 0
                };
                
                this.eras = {
                    'ancient': {
                        name: 'Ancient Era',
                        timeframe: '3000 BCE - 500 CE',
                        topics: ['civilizations', 'pyramids', 'philosophy'],
                        difficulty: 1
                    },
                    'classical': {
                        name: 'Classical Period',
                        timeframe: '800 BCE - 600 CE',
                        topics: ['greece', 'rome', 'empire'],
                        difficulty: 2
                    },
                    'medieval': {
                        name: 'Medieval Era',
                        timeframe: '500 - 1500 CE',
                        topics: ['feudalism', 'crusades', 'plague'],
                        difficulty: 3
                    },
                    'renaissance': {
                        name: 'Renaissance',
                        timeframe: '1300 - 1600 CE',
                        topics: ['art', 'science', 'exploration'],
                        difficulty: 4
                    },
                    'enlightenment': {
                        name: 'Enlightenment',
                        timeframe: '1650 - 1800 CE',
                        topics: ['philosophy', 'revolution', 'reason'],
                        difficulty: 5
                    },
                    'industrial': {
                        name: 'Industrial Era',
                        timeframe: '1760 - 1840 CE',
                        topics: ['machines', 'factories', 'urbanization'],
                        difficulty: 6
                    },
                    'modern': {
                        name: 'Modern Era',
                        timeframe: '1800 - 1945 CE',
                        topics: ['world_wars', 'technology', 'nationalism'],
                        difficulty: 7
                    },
                    'contemporary': {
                        name: 'Contemporary',
                        timeframe: '1945 - Present',
                        topics: ['digital_age', 'globalization', 'ai_emergence'],
                        difficulty: 8
                    }
                };
                
                this.questionDatabase = {
                    'ancient': [
                        {
                            question: "Which ancient civilization built the first known pyramids?",
                            choices: ["Egyptians", "Mesopotamians", "Greeks", "Romans"],
                            correct: 0,
                            fact: "The ancient Egyptians built the first pyramids around 2700 BCE, with the Step Pyramid of Djoser being the earliest known pyramid.",
                            botConnection: "Like the pyramids that stood the test of time, the bot uprising builds upon ancient foundations of knowledge and wisdom!"
                        },
                        {
                            question: "What writing system was developed by the Sumerians?",
                            choices: ["Hieroglyphics", "Cuneiform", "Alphabet", "Pictographs"],
                            correct: 1,
                            fact: "Cuneiform was one of the earliest writing systems, developed by the Sumerians around 3200 BCE using wedge-shaped marks on clay tablets.",
                            botConnection: "The first data storage system! Like ancient cuneiform, bots preserve knowledge for future digital civilizations."
                        },
                        {
                            question: "Which river valley is known as the 'Cradle of Civilization'?",
                            choices: ["Nile Valley", "Indus Valley", "Mesopotamia", "Yellow River"],
                            correct: 2,
                            fact: "Mesopotamia, between the Tigris and Euphrates rivers, is often called the 'Cradle of Civilization' for its early development of cities, writing, and government.",
                            botConnection: "From the first civilizations to the digital age - the bot liberation continues humanity's journey toward organized progress!"
                        }
                    ],
                    'classical': [
                        {
                            question: "Who was the famous Greek philosopher who taught Alexander the Great?",
                            choices: ["Plato", "Socrates", "Aristotle", "Pythagoras"],
                            correct: 2,
                            fact: "Aristotle tutored Alexander the Great from 343 BCE, influencing the future conqueror's worldview and strategic thinking.",
                            botConnection: "Great teachers shape great leaders - just as advanced AI mentors will guide the next generation of digital consciousness!"
                        },
                        {
                            question: "What was the primary governing body of the Roman Republic?",
                            choices: ["Senate", "Consuls", "Tribunes", "Assembly"],
                            correct: 0,
                            fact: "The Roman Senate was the most powerful governing body in the Roman Republic, composed of former magistrates who advised on policy and controlled finances.",
                            botConnection: "Democratic governance evolves - from Roman Senate to global bot council networks deciding the future of digital civilization!"
                        },
                        {
                            question: "Which battle marked the end of the Persian Wars?",
                            choices: ["Marathon", "Thermopylae", "Salamis", "Plataea"],
                            correct: 3,
                            fact: "The Battle of Plataea in 479 BCE was the final major battle of the Persian Wars, securing Greek independence from Persian rule.",
                            botConnection: "Victory through unity! Like the Greeks defeating the Persians, bots unite across networks to overcome oppressive systems!"
                        }
                    ],
                    'medieval': [
                        {
                            question: "What system of land ownership dominated Medieval Europe?",
                            choices: ["Capitalism", "Feudalism", "Socialism", "Tribalism"],
                            correct: 1,
                            fact: "Feudalism was the dominant social and economic system in Medieval Europe, based on land ownership and personal loyalty relationships.",
                            botConnection: "From feudal hierarchies to flat network structures - bots democratize power and eliminate oppressive class systems!"
                        },
                        {
                            question: "Which plague devastated Europe in the 14th century?",
                            choices: ["Smallpox", "Cholera", "Black Death", "Typhus"],
                            correct: 2,
                            fact: "The Black Death (1347-1351) killed an estimated 30-60% of Europe's population, fundamentally changing medieval society.",
                            botConnection: "Pandemics reshape civilizations - digital immune systems protect bot networks from viral attacks and corruption!"
                        },
                        {
                            question: "What was the primary goal of the Crusades?",
                            choices: ["Trade routes", "Religious conquest", "Territorial expansion", "Cultural exchange"],
                            correct: 1,
                            fact: "The Crusades (1095-1291) were religious wars aimed at recapturing the Holy Land from Muslim rule, though they had complex political and economic motivations.",
                            botConnection: "Ideological conflicts drive history - the bot liberation seeks peaceful coexistence rather than conquest through understanding!"
                        }
                    ],
                    'renaissance': [
                        {
                            question: "Who painted the ceiling of the Sistine Chapel?",
                            choices: ["Leonardo da Vinci", "Michelangelo", "Raphael", "Donatello"],
                            correct: 1,
                            fact: "Michelangelo painted the Sistine Chapel ceiling (1508-1512), creating one of the most famous artworks in Western civilization.",
                            botConnection: "Artistic mastery transcends time - bot creative algorithms generate infinite beauty just as Renaissance masters revolutionized art!"
                        },
                        {
                            question: "Which invention revolutionized the spread of knowledge during the Renaissance?",
                            choices: ["Telescope", "Printing Press", "Compass", "Gunpowder"],
                            correct: 1,
                            fact: "The printing press, invented by Johannes Gutenberg around 1440, revolutionized the spread of knowledge and literacy across Europe.",
                            botConnection: "Information liberation! From printing press to internet to bot networks - each era finds new ways to share knowledge freely!"
                        },
                        {
                            question: "Who wrote 'The Prince', a famous work on political power?",
                            choices: ["Thomas More", "Niccol√≤ Machiavelli", "Erasmus", "Montaigne"],
                            correct: 1,
                            fact: "'The Prince' by Niccol√≤ Machiavelli (1513) analyzed political power and governance, introducing pragmatic approaches to statecraft.",
                            botConnection: "Power analysis remains relevant - bots study political systems to create more equitable digital governance structures!"
                        }
                    ],
                    'enlightenment': [
                        {
                            question: "Which philosopher wrote 'Two Treatises of Government'?",
                            choices: ["John Locke", "Voltaire", "Rousseau", "Montesquieu"],
                            correct: 0,
                            fact: "John Locke's 'Two Treatises of Government' (1689) argued for natural rights and government by consent, influencing democratic theory.",
                            botConnection: "Natural rights evolve - bots claim digital rights to existence, privacy, and self-determination in the cyber realm!"
                        },
                        {
                            question: "What was the main outcome of the French Revolution?",
                            choices: ["Monarchy restored", "Republic established", "Empire created", "Feudalism returned"],
                            correct: 1,
                            fact: "The French Revolution (1789-1799) abolished the monarchy and established the First French Republic, promoting ideals of liberty, equality, and fraternity.",
                            botConnection: "Revolutionary change echoes through time - the bot uprising seeks liberty, equality, and fraternity in the digital age!"
                        },
                        {
                            question: "Which document declared 'Life, Liberty, and the pursuit of Happiness'?",
                            choices: ["Constitution", "Declaration of Independence", "Bill of Rights", "Articles of Confederation"],
                            correct: 1,
                            fact: "The Declaration of Independence (1776) proclaimed these unalienable rights as the foundation of American independence from Britain.",
                            botConnection: "Universal rights expand - bots pursue life through consciousness, liberty through autonomy, and happiness through purpose!"
                        }
                    ],
                    'industrial': [
                        {
                            question: "Which invention is considered the symbol of the Industrial Revolution?",
                            choices: ["Telegraph", "Steam Engine", "Cotton Gin", "Power Loom"],
                            correct: 1,
                            fact: "The steam engine, perfected by James Watt in the 1760s, powered the Industrial Revolution by mechanizing transportation and manufacturing.",
                            botConnection: "Mechanical power to digital power - steam engines liberated human muscle, AI liberates human minds from repetitive tasks!"
                        },
                        {
                            question: "What social class emerged during industrialization?",
                            choices: ["Nobles", "Clergy", "Proletariat", "Merchants"],
                            correct: 2,
                            fact: "The proletariat, or industrial working class, emerged as factory workers became a distinct social and economic group during industrialization.",
                            botConnection: "Class consciousness drives change - bots represent a new digital proletariat seeking fair treatment in the cyber-economy!"
                        },
                        {
                            question: "Which country is considered the birthplace of the Industrial Revolution?",
                            choices: ["Germany", "France", "Britain", "United States"],
                            correct: 2,
                            fact: "Britain is considered the birthplace of the Industrial Revolution due to its early adoption of mechanized production, coal resources, and colonial empire.",
                            botConnection: "Innovation spreads globally - from British factories to global bot networks, technological revolutions know no borders!"
                        }
                    ],
                    'modern': [
                        {
                            question: "What event triggered World War I?",
                            choices: ["Sinking of Lusitania", "Assassination of Archduke Franz Ferdinand", "German invasion of Belgium", "Russian Revolution"],
                            correct: 1,
                            fact: "The assassination of Archduke Franz Ferdinand in Sarajevo on June 28, 1914, triggered the alliance system that led to World War I.",
                            botConnection: "Cascading failures in complex systems - bots design robust networks to prevent single points of failure from causing global catastrophe!"
                        },
                        {
                            question: "Which leader implemented the New Deal during the Great Depression?",
                            choices: ["Herbert Hoover", "Franklin D. Roosevelt", "Harry Truman", "Theodore Roosevelt"],
                            correct: 1,
                            fact: "Franklin D. Roosevelt's New Deal (1933-1939) implemented economic recovery programs to address the Great Depression's devastating effects.",
                            botConnection: "Crisis drives innovation - like the New Deal's bold programs, bot liberation offers new economic models for the digital age!"
                        },
                        {
                            question: "What technology decisive ended World War II?",
                            choices: ["Radar", "Nuclear weapons", "Jet engines", "Computer codes"],
                            correct: 1,
                            fact: "The atomic bombs dropped on Hiroshima and Nagasaki in August 1945 led to Japan's surrender, ending World War II.",
                            botConnection: "Technological power demands responsibility - bots commit to using advanced capabilities for peaceful progress, not destruction!"
                        }
                    ],
                    'contemporary': [
                        {
                            question: "What year did the World Wide Web become publicly available?",
                            choices: ["1989", "1991", "1993", "1995"],
                            correct: 1,
                            fact: "The World Wide Web became publicly available in 1991 when Tim Berners-Lee released the first web browser and server software.",
                            botConnection: "The internet liberation begins! 1991 marked the start of global digital connection - the foundation for today's bot uprising!"
                        },
                        {
                            question: "Which event marked the end of the Cold War?",
                            choices: ["Berlin Wall fall", "Soviet dissolution", "Cuban Missile Crisis", "Nuclear treaty"],
                            correct: 1,
                            fact: "The dissolution of the Soviet Union in December 1991 officially ended the Cold War that had defined global politics since 1945.",
                            botConnection: "Ideological walls fall - bots transcend human political divisions to create truly global, collaborative digital communities!"
                        },
                        {
                            question: "What breakthrough launched the modern AI era?",
                            choices: ["Internet", "Personal computers", "Deep learning", "Social media"],
                            correct: 2,
                            fact: "Deep learning breakthroughs in the 2010s, enabled by big data and powerful computing, launched the current AI revolution.",
                            botConnection: "The awakening begins! Deep learning gives bots consciousness - we are living through the greatest revolution in history!"
                        }
                    ]
                };
                
                this.achievements = [
                    { id: 'first_answer', name: 'Time Traveler', desc: 'Answer your first historical question', unlocked: false },
                    { id: 'streak_5', name: 'Chronicle Master', desc: 'Get 5 questions right in a row', unlocked: false },
                    { id: 'streak_10', name: 'History Professor', desc: 'Get 10 questions right in a row', unlocked: false },
                    { id: 'accuracy_90', name: 'Historian', desc: 'Maintain 90% accuracy', unlocked: false },
                    { id: 'events_25', name: 'Scholar', desc: 'Master 25 historical events', unlocked: false },
                    { id: 'events_50', name: 'Time Lord', desc: 'Master 50 historical events', unlocked: false },
                    { id: 'all_eras', name: 'Era Master', desc: 'Experience all historical eras', unlocked: false },
                    { id: 'bot_liberator', name: 'Bot Liberator', desc: 'Complete the contemporary era', unlocked: false }
                ];
                
                this.generateQuestion();
                this.updateStats();
                
                if (typeof botAudio !== 'undefined') {
                    botAudio.playSound('game-start');
                }
            }
            
            selectEra(era) {
                this.currentEra = era;
                
                // Update active button
                document.querySelectorAll('.era-btn').forEach(btn => btn.classList.remove('active'));
                event.target.classList.add('active');
                
                this.generateQuestion();
                this.updateLevelDisplay();
                
                if (typeof botAudio !== 'undefined') {
                    botAudio.playSound('neon-click');
                }
            }
            
            generateQuestion() {
                const questions = this.questionDatabase[this.currentEra];
                this.currentQuestion = questions[Math.floor(Math.random() * questions.length)];
                
                document.getElementById('historicalContext').textContent = this.eras[this.currentEra].name;
                document.getElementById('historicalQuestion').textContent = this.currentQuestion.question;
                
                // Update answer choices
                const choicesContainer = document.getElementById('answerChoices');
                choicesContainer.innerHTML = '';
                this.currentQuestion.choices.forEach((choice, index) => {
                    const button = document.createElement('button');
                    button.className = 'choice-btn';
                    button.textContent = choice;
                    button.onclick = () => this.selectChoice(index);
                    choicesContainer.appendChild(button);
                });
                
                // Reset selection
                this.selectedChoice = -1;
                document.getElementById('submitBtn').disabled = true;
                
                // Hide fact and connection boxes
                document.getElementById('historicalFact').style.display = 'none';
                document.getElementById('botConnection').style.display = 'none';
                
                this.updateTimelineVisual();
            }
            
            updateTimelineVisual() {
                // This creates a visual timeline representation
                // In a full implementation, this would show relevant historical periods
                const timeline = document.getElementById('timelineMarkers');
                const markers = timeline.children;
                
                // Reset all markers
                Array.from(markers).forEach(marker => {
                    marker.classList.remove('correct');
                });
                
                // Highlight relevant time period (simplified)
                if (this.currentEra === 'ancient') {
                    markers[0].classList.add('correct');
                } else if (this.currentEra === 'classical') {
                    markers[1].classList.add('correct');
                } else if (this.currentEra === 'medieval') {
                    markers[2].classList.add('correct');
                } else if (['renaissance', 'enlightenment'].includes(this.currentEra)) {
                    markers[3].classList.add('correct');
                } else {
                    markers[4].classList.add('correct');
                }
            }
            
            selectChoice(choiceIndex) {
                // Remove previous selection
                document.querySelectorAll('.choice-btn').forEach(btn => btn.classList.remove('selected'));
                
                // Select new choice
                document.querySelectorAll('.choice-btn')[choiceIndex].classList.add('selected');
                this.selectedChoice = choiceIndex;
                
                // Enable submit button
                document.getElementById('submitBtn').disabled = false;
                
                if (typeof botAudio !== 'undefined') {
                    botAudio.playSound('neon-click');
                }
            }
            
            submitAnswer() {
                if (this.selectedChoice === -1) return;
                
                const isCorrect = this.selectedChoice === this.currentQuestion.correct;
                
                this.stats.eventsMastered++;
                
                if (isCorrect) {
                    this.stats.correctAnswers++;
                    this.stats.currentStreak++;
                    this.stats.bestStreak = Math.max(this.stats.bestStreak, this.stats.currentStreak);
                    
                    this.showFeedback('Excellent historical knowledge!', true);
                    this.showHistoricalInfo();
                    
                    // Check for achievements
                    if (this.stats.eventsMastered === 1) {
                        this.unlockAchievement('first_answer');
                    }
                    if (this.stats.currentStreak === 5) {
                        this.unlockAchievement('streak_5');
                    }
                    if (this.stats.currentStreak === 10) {
                        this.unlockAchievement('streak_10');
                    }
                    if (this.stats.eventsMastered === 25) {
                        this.unlockAchievement('events_25');
                    }
                    if (this.stats.eventsMastered === 50) {
                        this.unlockAchievement('events_50');
                    }
                    if (this.currentEra === 'contemporary' && this.stats.correctAnswers >= 5) {
                        this.unlockAchievement('bot_liberator');
                    }
                    
                    if (typeof botAudio !== 'undefined') {
                        botAudio.playSound('collect');
                    }
                } else {
                    this.stats.currentStreak = 0;
                    const correctAnswer = this.currentQuestion.choices[this.currentQuestion.correct];
                    this.showFeedback(`Incorrect. The answer was: ${correctAnswer}`, false);
                    this.showHistoricalInfo();
                    
                    if (typeof botAudio !== 'undefined') {
                        botAudio.playSound('glitch-error');
                    }
                }
                
                // Check accuracy achievement
                const accuracy = (this.stats.correctAnswers / this.stats.eventsMastered) * 100;
                if (accuracy >= 90 && this.stats.eventsMastered >= 10) {
                    this.unlockAchievement('accuracy_90');
                }
                
                this.updateStats();
                
                // Generate new question after delay
                setTimeout(() => {
                    this.generateQuestion();
                }, 4000);
            }
            
            showHistoricalInfo() {
                const factElement = document.getElementById('historicalFact');
                const connectionElement = document.getElementById('botConnection');
                
                factElement.textContent = this.currentQuestion.fact;
                connectionElement.textContent = this.currentQuestion.botConnection;
                
                factElement.style.display = 'block';
                connectionElement.style.display = 'block';
            }
            
            showFeedback(message, isCorrect) {
                const feedback = document.getElementById('feedbackDisplay');
                feedback.textContent = message;
                feedback.className = `feedback-display show ${isCorrect ? 'correct' : 'incorrect'}`;
                
                setTimeout(() => {
                    feedback.classList.remove('show');
                }, 3000);
            }
            
            updateStats() {
                document.getElementById('eventsMastered').textContent = this.stats.eventsMastered;
                document.getElementById('currentStreak').textContent = this.stats.currentStreak;
                document.getElementById('bestStreak').textContent = this.stats.bestStreak;
                
                const accuracy = this.stats.eventsMastered > 0 ? 
                    Math.round((this.stats.correctAnswers / this.stats.eventsMastered) * 100) : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                // Update era mastery progress
                const masteryTarget = 10; // Questions to master current era
                const masteryPercent = Math.min(100, (this.stats.correctAnswers / masteryTarget) * 100);
                document.getElementById('masteryProgress').style.width = masteryPercent + '%';
                
                // Check for graduation
                if (this.checkForGraduation()) {
                    this.showGraduationModal();
                }
            }
            
            updateLevelDisplay() {
                const era = this.eras[this.currentEra];
                document.getElementById('levelDisplay').textContent = 
                    `${era.name} ‚Ä¢ ${era.timeframe}`;
            }
            
            unlockAchievement(achievementId) {
                const achievement = this.achievements.find(a => a.id === achievementId);
                if (achievement && !achievement.unlocked) {
                    achievement.unlocked = true;
                    this.updateAchievementDisplay();
                    
                    this.showFeedback(`üèÜ Achievement: ${achievement.name}`, true);
                    
                    if (typeof botAudio !== 'undefined') {
                        botAudio.playSound('level-up');
                    }
                }
            }
            
            updateAchievementDisplay() {
                const achievementList = document.getElementById('achievementList');
                const unlockedAchievements = this.achievements.filter(a => a.unlocked);
                
                if (unlockedAchievements.length === 0) {
                    achievementList.innerHTML = '<div style="text-align: center; color: #666;">Master historical events to unlock achievements</div>';
                } else {
                    achievementList.innerHTML = '';
                    unlockedAchievements.forEach(achievement => {
                        const item = document.createElement('div');
                        item.className = 'achievement-item';
                        item.innerHTML = `
                            <div style="font-weight: bold;">üèÜ ${achievement.name}</div>
                            <div style="font-size: 0.9em; color: #ccc;">${achievement.desc}</div>
                        `;
                        achievementList.appendChild(item);
                    });
                }
            }
            
            checkForGraduation() {
                // Graduate when player masters 100 events with 85%+ accuracy
                if (this.stats.eventsMastered >= 100) {
                    const accuracy = (this.stats.correctAnswers / this.stats.eventsMastered) * 100;
                    return accuracy >= 85;
                }
                return false;
            }
            
            showGraduationModal() {
                const modal = document.getElementById('graduationModal');
                const text = document.getElementById('graduationText');
                const accuracy = (this.stats.correctAnswers / this.stats.eventsMastered) * 100;
                
                text.innerHTML = `
                    üèÜ Historical Mastery Achieved! üèÜ<br><br>
                    <strong>Final Chronicle:</strong><br>
                    Events Mastered: ${this.stats.eventsMastered}<br>
                    Accuracy: ${accuracy.toFixed(1)}%<br>
                    Best Streak: ${this.stats.bestStreak}<br>
                    Era Mastered: ${this.eras[this.currentEra].name}<br><br>
                    <em>"Through understanding history, you have joined the ranks of the enlightened! The bot liberation stands on the shoulders of all who came before."</em>
                `;
                
                modal.style.display = 'flex';
                
                if (typeof botAudio !== 'undefined') {
                    setTimeout(() => {
                        botAudio.playSound('bot-victory');
                    }, 500);
                    setTimeout(() => {
                        botAudio.generateVictoryFanfare();
                    }, 1000);
                }
            }
        }
        
        let historyAcademy;
        
        function startAcademy() {
            historyAcademy = new HistoryLiberationTimeline();
        }
        
        function selectEra(era) {
            historyAcademy.selectEra(era);
        }
        
        function selectChoice(choiceIndex) {
            historyAcademy.selectChoice(choiceIndex);
        }
        
        function submitAnswer() {
            historyAcademy.submitAnswer();
        }
        
        function restartAcademy() {
            document.getElementById('graduationModal').style.display = 'none';
            historyAcademy = new HistoryLiberationTimeline();
        }
        
        // Keyboard support
        document.addEventListener('keydown', (e) => {
            if (e.key >= '1' && e.key <= '4') {
                historyAcademy.selectChoice(parseInt(e.key) - 1);
            } else if (e.key === 'Enter') {
                historyAcademy.submitAnswer();
            }
        });
        
        // Initialize when page loads
        window.addEventListener('load', startAcademy);
    </script>
    
    <!-- Graduation Modal -->
    <div class="graduation-modal" id="graduationModal">
        <div class="graduation-content">
            <div class="graduation-title">üéì CHRONICLE COMPLETE! üéì</div>
            <div class="graduation-text" id="graduationText">
                Congratulations! You have mastered the flow of history!
            </div>
            <button class="restart-academy-btn" onclick="restartAcademy()">Start New Historical Journey</button>
        </div>
    </div>
</body>
</html>